{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlueAI - ìë™í™” ë„ìš°ë¯¸</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <!-- ì•„ì´ì½˜ í°íŠ¸ ì¶”ê°€ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- B ë¡œê³  ë²„íŠ¼ (ì‚¬ì´ë“œë°” íŠ¸ë¦¬ê±° ì¬ë””ìì¸) -->
    <div id="sidebarTrigger" class="sidebar-trigger">
        <div id="logoIcon" class="logo-icon">B</div>
    </div>

    <!-- ì‚¬ì´ë“œë°” -->
    <div id="sidebar" class="collapsed">
        <!-- ì—¬ê¸°ì— ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¥¸ ë©”ë‰´ ë³€ê²½ -->
        <div class="sidebar-header">
            <!-- ì‚¬ì´ë“œë°” í•€ ë²„íŠ¼ -->
            <div class="sidebar-pin" id="sidebarPin">
                <i class="fas fa-thumbtack"></i>
                <span class="pin-tooltip">ì‚¬ì´ë“œë°” ê³ ì •</span>
            </div>
        </div>
        
        <!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… ë²„íŠ¼ - ë¹„ë¡œê·¸ì¸ ì‹œì—ë§Œ í‘œì‹œ -->
        {% if not user.is_authenticated %}
        <div class="auth-buttons">
            <a href="{% url 'accounts:login' %}" class="primary-button">ë¡œê·¸ì¸</a>
            <a href="{% url 'accounts:register' %}" class="secondary-button">íšŒì›ê°€ì…</a>
        </div>
        {% endif %}

        <!-- ìƒˆ ì±„íŒ… ë²„íŠ¼ - í•­ìƒ í‘œì‹œ -->
        <button id="newChat" class="primary-button">+ ìƒˆ ì±„íŒ…</button>
        
        <!-- ì¹´í…Œê³ ë¦¬ íƒ­ -->
        <div class="category-tabs">
            <button class="tab-button active" data-category="recent">ìµœê·¼ ì‘ì—…</button>
            <button class="tab-button" data-category="favorites">ì¦ê²¨ì°¾ê¸°</button>
        </div>
        
        <!-- ìµœê·¼ ì±„íŒ… ëª©ë¡ -->
        <div id="recentTasksContainer" class="task-container">
            <ul id="taskList" class="task-list">
                <!-- ì‘ì—… ëª©ë¡ì€ JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
            </ul>
            <button id="viewAllTasks" class="view-all-button" style="display: none;">ì „ì²´ ë³´ê¸°</button>
        </div>
        
        <!-- ì¦ê²¨ì°¾ê¸° ëª©ë¡ -->
        <div id="favoritesContainer" class="task-container" style="display: none;">
            <ul id="favoritesList" class="task-list">
                <!-- ì¦ê²¨ì°¾ê¸° ëª©ë¡ì€ JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
            </ul>
        </div>
        
        <!-- í•˜ë‹¨ ë©”ë‰´ - ì—…ë°ì´íŠ¸ëœ ë“œë¡­ë‹¤ìš´ (ìœ„ì¹˜ ë° ë°©í–¥ ìˆ˜ì •) -->
        <div class="sidebar-footer">
            <div class="footer-button-container">
                <button id="settingsBtn" class="footer-button">ìì„¸íˆ ì•Œì•„ë³´ê¸°</button>
                <div class="footer-dropdown settings-dropdown">
                    <a href="#" class="dropdown-link dropdown-special">
                        blueSLAPì— ëŒ€í•˜ì—¬
                        <i class="fas fa-external-link-alt link-icon"></i>
                    </a>
                    <div class="dropdown-extra-separator"></div>
                    <a href="#" class="dropdown-link">
                        ì†Œë¹„ì ì´ìš©ì•½ê´€
                        <i class="fas fa-external-link-alt link-icon"></i>
                    </a>
                    <a href="#" class="dropdown-link">
                        ì´ìš© ì •ì±…
                        <i class="fas fa-external-link-alt link-icon"></i>
                    </a>
                    <a href="#" class="dropdown-link">
                        ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨
                        <i class="fas fa-external-link-alt link-icon"></i>
                    </a>
                    <a href="#" class="dropdown-link">
                        ê°œì¸ì •ë³´ ì„ íƒì‚¬í•­
                        <i class="fas fa-external-link-alt link-icon"></i>
                    </a>
                </div>
            </div>
            <div class="footer-button-container">
                <button id="helpBtn" class="footer-button">ë„ì›€ë§</button>
                <div class="footer-dropdown help-dropdown">
                    <a href="#" class="dropdown-link">
                        BlueAI ì‚¬ìš©ë²•
                    </a>
                    <a href="#" class="dropdown-link">
                        ìì£¼ ë¬»ëŠ” ì§ˆë¬¸
                    </a>
                    <a href="#" class="dropdown-link">
                        ë¬¸ì œ ì‹ ê³ í•˜ê¸°
                    </a>
                </div>
            </div>
            <div class="footer-button-container">
                <button id="langBtn" class="footer-button">ì–¸ì–´</button>
                <div class="footer-dropdown lang-dropdown">
                    <a href="#" class="dropdown-link active">
                        í•œêµ­ì–´
                        <i class="fas fa-check check-icon"></i>
                    </a>
                    <a href="#" class="dropdown-link">
                        English
                        <i class="fas fa-check check-icon"></i>
                    </a>
                    <a href="#" class="dropdown-link">
                        æ—¥æœ¬èª
                        <i class="fas fa-check check-icon"></i>
                    </a>
                    <a href="#" class="dropdown-link">
                        ä¸­æ–‡
                        <i class="fas fa-check check-icon"></i>
                    </a>
                    <a href="#" class="dropdown-link">
                        FranÃ§ais
                        <i class="fas fa-check check-icon"></i>
                    </a>
                    <a href="#" class="dropdown-link">
                        PortuguÃªs
                        <i class="fas fa-check check-icon"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div id="main" class="sidebar-collapsed">
        <!-- ìƒë‹¨ í—¤ë” -->
        <div id="header">
            <div class="left-section">
            </div>
            <h1 id="taskTitle" class="header-title" style="display: none;">í…ŒìŠ¤íŠ¸ ì‘ì—…</h1>
            <!-- ì„œë¸Œí˜ì´ì§€ ì œëª© ë“œë¡­ë‹¤ìš´ ë©”ë‰´ -->
            <div class="title-dropdown">
                <a href="#" class="dropdown-item rename">
                    <i class="fas fa-edit"></i>
                    ì´ë¦„ ë³€ê²½
                </a>
                <a href="#" class="dropdown-item delete">
                    <i class="fas fa-trash-alt"></i>
                    ì‚­ì œ
                </a>
            </div>
            <div class="right-section">
                <button id="shareBtn" class="utility-button tooltip-container" style="display: none;">
                    <i class="fas fa-share-alt"></i>
                    <span class="tooltip">ê³µìœ </span>
                </button>
                <button id="favoriteBtn" class="utility-button tooltip-container" style="display: none;">
                    <i class="far fa-star"></i>
                    <span class="tooltip">ì¦ê²¨ì°¾ê¸°</span>
                </button>
                <button id="logDiaryBtn" class="utility-button tooltip-container" style="display: none;">
                    <i class="fas fa-clipboard-list"></i>
                    <span class="tooltip">Log Diary</span>
                </button>
                {% if user.is_authenticated %}
                <div class="user-container">
                    <button id="userBtn" class="user-button">{{ user.get_initial|default:'?' }}</button>
                    <!-- ì‚¬ìš©ì ë“œë¡­ë‹¤ìš´ ë©”ë‰´ (í”„ë¡œì íŠ¸ ì„ íƒ ê¸°ëŠ¥ ë³µì›) -->
                    <div class="user-dropdown">
                        <div class="dropdown-header">
                            {{ user.get_display_name }}ë‹˜ì˜ BlueAI
                            <div class="user-role">
                                host
                                <span class="user-role-tag">{{ user.get_plan_display_name }}</span>
                            </div>
                            <div class="quick-actions">
                                <button class="quick-action-btn"><i class="fas fa-cog"></i></button>
                                <button class="quick-action-btn"><i class="fas fa-user-plus"></i></button>
                            </div>
                        </div>
                        <div class="dropdown-separator"></div>
                        
                        <!-- í”„ë¡œì íŠ¸ ì„ íƒ ì„¹ì…˜ (ë³µì›ëœ ê¸°ëŠ¥) -->
                        <div class="dropdown-section projects-section">
                            <div class="dropdown-subheader">í”„ë¡œì íŠ¸</div>
                            <ul class="project-list">
                                {% for project in current_user_projects %}
                                <li class="project-item {% if current_project.id == project.id %}active-project{% endif %}" data-project-id="{{ project.id }}">
                                    <div class="project-icon">{{ project.name|first }}</div>
                                    <div class="project-info">
                                        <div class="project-name">{{ project.name }}</div>
                                        <div class="project-owner">{{ project.owner.get_display_name }}</div>
                                    </div>
                                </li>
                                {% endfor %}
                                
                                {% for project in shared_projects %}
                                <li class="project-item {% if current_project.id == project.id %}active-project{% endif %}" data-project-id="{{ project.id }}">
                                    <div class="project-icon">{{ project.name|first }}</div>
                                    <div class="project-info">
                                        <div class="project-name">{{ project.name }}</div>
                                        <div class="project-owner">{{ project.owner.get_display_name }} (ê³µìœ )</div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                        
                        <div class="dropdown-separator"></div>
                        <div class="dropdown-section">
                            <a href="{% url 'accounts:profile' %}" class="dropdown-item"><i class="fas fa-user"></i> í”„ë¡œí•„</a>
                            <a href="#" class="dropdown-item"><i class="fas fa-crown"></i> í”Œëœ ì—…ê·¸ë ˆì´ë“œ</a>
                            <a href="#" class="dropdown-item"><i class="fas fa-sliders-h"></i> BlueAI ë§ì¶¤ ì„¤ì •</a>
                            <a href="#" class="dropdown-item windows-app"><i class="fas fa-download"></i> Windows ì•± ë‹¤ìš´ë¡œë“œ</a>
                        </div>
                        <div class="dropdown-separator"></div>
                        <div class="dropdown-section">
                            <form id="logout-form" method="post" action="{% url 'accounts:logout' %}" class="logout-form">
                                {% csrf_token %}
                                <button type="submit" class="logout-button">
                                    <i class="fas fa-sign-out-alt"></i> ë¡œê·¸ì•„ì›ƒ
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="login-buttons">
                    <a href="{% url 'accounts:login' %}" class="primary-button">ë¡œê·¸ì¸</a>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- ì²« í˜ì´ì§€ ë‚´ìš© (ì²˜ìŒ ë°©ë¬¸ ì‹œ) -->
        <div id="welcomePage" class="welcome-page">
            <div class="welcome-container">
                <div class="logo-container">
                    <h1 class="logo">BlueAI</h1>
                </div>
                <h2 class="welcome-message">
                    {% if user.is_authenticated %}
                    ì˜¤ëŠ˜ë„ ì˜ ë¶€íƒë“œë¦½ë‹ˆë‹¤, <span class="user-name-text">{{ user.get_display_name }}</span>ë‹˜
                    {% else %}
                    í™˜ì˜í•©ë‹ˆë‹¤! BlueAIì™€ í•¨ê»˜ ì‹œì‘í•˜ì„¸ìš”
                    {% endif %}
                </h2>
                
                <div class="input-wrapper">
                    <div class="main-input-container">
                        <!-- ëª¨ë¸ ì„ íƒ ë° ì‘ë‹µ ìŠ¤íƒ€ì¼ ì„ íƒ ì˜ì—­ ê°œì„  - ëª¨ë¸ê³¼ ì‚¬ê³ ëª¨ë“œ í†µí•© -->
                        <div class="model-options">
                            <div class="model-selector">
                                <button class="model-button">
                                    <span class="model-name">Quantum 1.0 Feynman</span>
                                    <i class="fas fa-check model-check"></i>
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                                <div class="thinking-mode">ì‚¬ê³ ëª¨ë“œ</div>
                                <div class="model-dropdown">
                                    <div class="model-option selected">
                                        <div class="model-option-name">Quantum 1.0 Feynman</div>
                                        <i class="fas fa-check model-check"></i>
                                    </div>
                                    <div class="model-option">
                                        <div class="model-option-name">Quantum 1.0 Basic</div>
                                    </div>
                                    <div class="model-option">
                                        <div class="model-option-name">Quantum 1.0 Expert</div>
                                    </div>
                                </div>
                            </div>
                            <div class="style-selector">
                                <button class="style-button">
                                    <i class="fas fa-pen-fancy"></i>
                                    <span>ì¼ë°˜</span>
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                                <div class="style-dropdown">
                                    <div class="style-option selected">
                                        <div>
                                            <div class="style-option-name">ì¼ë°˜</div>
                                            <div class="style-option-desc">Quantumì˜ ê¸°ë³¸ ì‘ë‹µ</div>
                                        </div>
                                        <i class="fas fa-check style-check"></i>
                                    </div>
                                    <div class="style-option">
                                        <div>
                                            <div class="style-option-name">ê°„ê²°í•œ</div>
                                            <div class="style-option-desc">ì§§ì€ ì‘ë‹µê³¼ ë” ë§ì€ ë©”ì‹œì§€</div>
                                        </div>
                                    </div>
                                    <div class="style-option">
                                        <div>
                                            <div class="style-option-name">ì„¤ëª…ì ì¸</div>
                                            <div class="style-option-desc">ì‚¬ìš©ì ê´€ì ì˜ ì„¸ë¶€ì ì¸ ì‘ë‹µ</div>
                                        </div>
                                    </div>
                                    <div class="style-option">
                                        <div>
                                            <div class="style-option-name">ê²©ì‹ìˆëŠ”</div>
                                            <div class="style-option-desc">ëª…í™•í•˜ê³  ì²´ê³„ì ì¸ ì‘ë‹µ</div>
                                        </div>
                                    </div>
                                    <div class="style-create">
                                        <i class="fas fa-plus"></i>
                                        ìŠ¤íƒ€ì¼ ìƒì„± ë° í¸ì§‘
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- í…ìŠ¤íŠ¸ ì˜ì—­ -->
                        <textarea id="mainInput" placeholder="ì˜¤ëŠ˜ì€ ì–´ë–¤ ê²ƒì„ ëŒ€ì‹ í•´ë“œë¦´ê¹Œìš”?" class="main-input" rows="1"></textarea>
                        
                        <!-- ì—…ë¡œë“œ íˆ´ë°” ê°œì„  (ì•„ì´ì½˜ë§Œ ë‚¨ê¸°ê³  íˆ´íŒ ì ìš©) -->
                        <div class="input-tools">
                            <button id="mainFileUploadBtn" class="tool-button tooltip-container">
                                <i class="fas fa-paperclip"></i>
                                <span class="tooltip">íŒŒì¼ ì—…ë¡œë“œ (ìµœëŒ€ 20ê°œ, ê° 30MB)</span>
                            </button>
                            <div class="tool-separator"></div>
                            <button class="tool-button tooltip-container">
                                <i class="fas fa-camera"></i>
                                <span class="tooltip">ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜</span>
                            </button>
                            <div class="tool-separator"></div>
                            <button class="tool-button tooltip-container">
                                <i class="fab fa-github"></i>
                                <span class="tooltip">GitHub</span>
                            </button>
                            <div class="tool-separator"></div>
                            <button class="tool-button tooltip-container">
                                <i class="fab fa-google-drive"></i>
                                <span class="tooltip">Google Drive</span>
                            </button>
                            <input type="file" id="mainFileUpload" hidden multiple>
                        </div>
                        
                        <!-- ì „ì†¡ ë²„íŠ¼ (ìœ„ì¹˜ ì¡°ì •) -->
                        <button id="mainEnterBtn" class="main-enter-btn">
                            <i class="fas fa-microphone mic-icon"></i>
                            <i class="fas fa-paper-plane send-icon" style="display: none;"></i>
                        </button>
                    </div>
                </div>
                
                <div class="example-tasks">
                    <h3>ìì£¼ ì‚¬ìš©í•˜ëŠ” ì‘ì—…</h3>
                    <div class="task-examples">
                        <div class="example-card" data-prompt="ë‚˜ë¼ì¥í„°ì—ì„œ RPA ê³µê³ ë¥¼ ê²€ìƒ‰í•´ì„œ ì—‘ì…€ë¡œ ì €ì¥í•´ì¤˜">
                            <div class="example-icon">ğŸ”</div>
                            <div class="example-title">ë‚˜ë¼ì¥í„° ê³µê³  ê²€ìƒ‰</div>
                        </div>
                        <div class="example-card" data-prompt="ì˜¤ëŠ˜ ë‰´ìŠ¤ë¥¼ ìš”ì•½í•´ì£¼ê³  ê°ì • ë¶„ì„í•´ì„œ ìŒì•… ì¶”ì²œí•´ì¤˜">
                            <div class="example-icon">ğŸ“°</div>
                            <div class="example-title">ë‰´ìŠ¤ ìš”ì•½ ë° ìŒì•… ì¶”ì²œ</div>
                        </div>
                        <div class="example-card" data-prompt="ë‚´ ë¸”ë¡œê·¸ìš© ì›¹ì‚¬ì´íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤˜">
                            <div class="example-icon">ğŸŒ</div>
                            <div class="example-title">ì›¹ì‚¬ì´íŠ¸ ìƒì„±</div>
                        </div>
                        <div class="example-card" data-prompt="ë‚ ì”¨ ì •ë³´ë¥¼ ì´ë¯¸ì§€ë¡œ ì €ì¥í•´ì¤˜">
                            <div class="example-icon">â˜€ï¸</div>
                            <div class="example-title">ë‚ ì”¨ ì •ë³´ ì´ë¯¸ì§€í™”</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ëŒ€í™” í˜ì´ì§€ (ëª…ë ¹ì–´ ì…ë ¥ í›„) -->
        <div id="chatPage" class="chat-page" style="display: none;">
            <!-- ëŒ€í™”ì°½ -->
            <div id="chatWindow">
                <!-- ë©”ì‹œì§€ëŠ” JavaScriptì—ì„œ ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
            </div>

            <!-- ì…ë ¥ ì»¨í…Œì´ë„ˆ - Claude 3.7 ìŠ¤íƒ€ì¼ë¡œ ìˆ˜ì • -->
            <div id="inputContainer">
                <div class="input-flex-container">
                    <!-- ì„œë¸Œí˜ì´ì§€ ëª¨ë¸ ì„ íƒ ì˜ì—­ ì¶”ê°€ -->
                    <div class="chat-model-options">
                        <div class="model-selector">
                            <button class="model-button">
                                <span class="model-name">Quantum 1.0 Feynman</span>
                                <i class="fas fa-check model-check"></i>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="thinking-mode">ì‚¬ê³ ëª¨ë“œ</div>
                            <div class="model-dropdown">
                                <div class="model-option selected">
                                    <div class="model-option-name">Quantum 1.0 Feynman</div>
                                    <i class="fas fa-check model-check"></i>
                                </div>
                                <div class="model-option">
                                    <div class="model-option-name">Quantum 1.0 Basic</div>
                                </div>
                                <div class="model-option">
                                    <div class="model-option-name">Quantum 1.0 Expert</div>
                                </div>
                            </div>
                        </div>

                        <div class="style-selector">
                            <button class="style-button">
                                <i class="fas fa-pen-fancy"></i>
                                <span>ì¼ë°˜</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="style-dropdown">
                                <div class="style-option selected">
                                    <div>
                                        <div class="style-option-name">ì¼ë°˜</div>
                                        <div class="style-option-desc">Quantumì˜ ê¸°ë³¸ ì‘ë‹µ</div>
                                    </div>
                                    <i class="fas fa-check style-check"></i>
                                </div>
                                <div class="style-option">
                                    <div>
                                        <div class="style-option-name">ê°„ê²°í•œ</div>
                                        <div class="style-option-desc">ì§§ì€ ì‘ë‹µê³¼ ë” ë§ì€ ë©”ì‹œì§€</div>
                                    </div>
                                </div>
                                <div class="style-option">
                                    <div>
                                        <div class="style-option-name">ì„¤ëª…ì ì¸</div>
                                        <div class="style-option-desc">ì‚¬ìš©ì ê´€ì ì˜ ì„¸ë¶€ì ì¸ ì‘ë‹µ</div>
                                    </div>
                                </div>
                                <div class="style-option">
                                    <div>
                                        <div class="style-option-name">ê²©ì‹ìˆëŠ”</div>
                                        <div class="style-option-desc">ëª…í™•í•˜ê³  ì²´ê³„ì ì¸ ì‘ë‹µ</div>
                                    </div>
                                </div>
                                <div class="style-create">
                                    <i class="fas fa-plus"></i>
                                    ìŠ¤íƒ€ì¼ ìƒì„± ë° í¸ì§‘
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ì…ë ¥ ì˜ì—­ -->
                    <textarea id="userInput" placeholder="ì˜¤ëŠ˜ì€ ì–´ë–¤ ê²ƒì„ ëŒ€ì‹ í•´ë“œë¦´ê¹Œìš”?" rows="1"></textarea>
                    
                    <!-- ì„œë¸Œí˜ì´ì§€ ì…ë ¥ì°½ ë„êµ¬ ì˜ì—­ -->
                    <div class="chat-input-tools">
                        <button id="fileUploadBtn" class="tool-button tooltip-container">
                            <i class="fas fa-paperclip"></i>
                            <span class="tooltip">íŒŒì¼ ì—…ë¡œë“œ</span>
                        </button>
                        <div class="tool-separator"></div>
                        <button class="tool-button tooltip-container">
                            <i class="fas fa-camera"></i>
                            <span class="tooltip">ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜</span>
                        </button>
                        <div class="tool-separator"></div>
                        <button class="tool-button tooltip-container">
                            <i class="fab fa-github"></i>
                            <span class="tooltip">GitHub</span>
                        </button>
                        <div class="tool-separator"></div>
                        <button class="tool-button tooltip-container">
                            <i class="fab fa-google-drive"></i>
                            <span class="tooltip">Google Drive</span>
                        </button>
                        <input type="file" id="fileUpload" hidden multiple>
                    </div>
                    
                    <!-- ì „ì†¡ ë²„íŠ¼ -->
                    <button id="enterBtn" class="send-button">
                        <i class="fas fa-microphone mic-icon"></i>
                        <i class="fas fa-paper-plane send-icon" style="display: none;"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- ì „ì²´ ì‘ì—… ê¸°ë¡ ëª¨ë‹¬ -->
        <div id="allTasksModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>ì „ì²´ ì‘ì—… ê¸°ë¡</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="ì‘ì—… ê²€ìƒ‰...">
                    </div>
                    <div class="all-tasks-list">
                        <!-- ëª¨ë“  ì‘ì—… ê¸°ë¡ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ëŒ€í™” ê¸°ë¡ ì‚¬ì´ë“œ íŒ¨ë„ -->
        <div id="logDiaryPanel" class="log-diary-panel">
            <div class="log-diary-header">
                <h3>Log Diary</h3>
                <button class="close-panel">&times;</button>
            </div>
            <div class="log-diary-content">
                <!-- ëŒ€í™” ê¸°ë¡ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë¨ -->
            </div>
        </div>
    </div>

    {% csrf_token %} <!-- CSRF í† í° ì¶”ê°€ -->
    <script>
        // ë¡œê·¸ì¸ ìƒíƒœ ë³€ìˆ˜ë¥¼ JavaScriptë¡œ ì „ë‹¬
        window.isAuthenticated = {% if user.is_authenticated %}true{% else %}false{% endif %};
        
        {% if user.is_authenticated %}
        window.userDisplayName = "{{ user.get_display_name }}";
        window.userInitial = "{{ user.get_initial|default:'' }}";
        window.userPlan = "{{ user.plan }}";
        {% endif %}
    
        // CSRF í† í° ê°€ì ¸ì˜¤ê¸°
        var csrfToken = document.querySelector('input[name="csrfmiddlewaretoken"]').value;
        var apiUrls = {
            processInput: "{% url 'core:process_input' %}",
            getTasks: "{% url 'core:get_tasks' %}",
            updateConversation: "{% url 'core:update_conversation' %}",
            executeTask: "{% url 'core:execute_task' %}",
            updateTaskTitle: "{% url 'core:update_task_title' %}",
            toggleFavorite: function(taskId) {
                return "{% url 'core:toggle_favorite' task_id=0 %}".replace('0', taskId);
            },
            getFavorites: "{% url 'core:get_favorites' %}",
            deleteTask: function(taskId) {
                return "{% url 'core:delete_task' task_id=0 %}".replace('0', taskId);
            },
            getTask: function(taskId) {
                return "{% url 'core:get_task' task_id=0 %}".replace('0', taskId);
            },
            switchProject: "{% url 'accounts:switch_project' %}"
        };
    </script>
    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>